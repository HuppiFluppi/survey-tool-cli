{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Survey/Quiz configuration file schema",
  "type": "object",
  "anyOf": [
    {
      "$ref": "#/$defs/SurveyConfig"
    },
    {
      "$ref": "#/$defs/PageConfig"
    }
  ],
  "$defs": {
    "SurveyConfig": {
      "title": "Survey configuration",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "title",
        "description"
      ],
      "properties": {
        "title": {
          "description": "Title of the survey",
          "type": "string",
          "minLength": 3
        },
        "description": {
          "description": "Description of the survey",
          "type": "string",
          "minLength": 20
        },
        "image_path": {
          "description": "Image to show at the top of the survey. Please make sure to use single quotes(') or use slash (/), not backslash for path separation",
          "type": "string",
          "minLength": 6
        },
        "type": {
          "description": "Type of the survey",
          "type": "string",
          "enum": [
            "survey",
            "quiz"
          ],
          "default": "survey"
        },
        "score": {
          "$ref": "#/$defs/ScoreSettings"
        }
      }
    },
    "PageConfig": {
      "type": "object",
      "title": "Page",
      "additionalProperties": false,
      "required": [
        "content",
        "title"
      ],
      "properties": {
        "title": {
          "type": "string",
          "description": "Title of this page",
          "minLength": 3
        },
        "description": {
          "type": "string",
          "description": "Description of this page",
          "minLength": 20
        },
        "image_path": {
          "description": "Image to show at the top of this page. Please make sure to use single quotes(') or use slash (/), not backslash for path separation",
          "type": "string",
          "minLength": 6
        },
        "content": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/Question"
          }
        }
      }
    },
    "ScoreSettings": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "show_question_scores": {
          "type": "boolean",
          "description": "If true, achievable points are shown on each question",
          "default": false
        },
        "show_leaderboard": {
          "type": "boolean",
          "description": "Leaderboard is only relevant when type == \"quiz\"",
          "default": true
        },
        "leaderboard": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "show_scores": {
              "type": "boolean",
              "description": "Show scored points per participant in the leaderboard",
              "default": true
            },
            "show_placeholder": {
              "type": "boolean",
              "description": "Show placeholder rows to fill the leaderboard up to limit",
              "default": true
            },
            "limit": {
              "type": "integer",
              "description": "Number of entries to show in the leaderboard",
              "minimum": 0,
              "default": 10
            }
          }
        }
      }
    },
    "Question": {
      "type": "object",
      "required": [
        "type",
        "title"
      ],
      "properties": {
        "type": {
          "type": "string",
          "description": "Specify the type of question",
          "enum": [
            "data",
            "choice",
            "text",
            "rating",
            "likert",
            "datetime",
            "information",
            "slider"
          ]
        },
        "required": {
          "type": "boolean",
          "description": "If true, the user must answer this question",
          "default": true
        },
        "title": {
          "type": "string",
          "description": "Question/Headline to show to the user",
          "minLength": 5
        },
        "description": {
          "type": "string"
        },
        "image_path": {
          "type": "string"
        },
        "config": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    }
  }
}